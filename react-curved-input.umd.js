(function(d,p){typeof exports=="object"&&typeof module!="undefined"?module.exports=p(require("react")):typeof define=="function"&&define.amd?define(["react"],p):(d=typeof globalThis!="undefined"?globalThis:d||self,d.ReactCurvedInput=p(d.React))})(this,function(d){"use strict";function p(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var u=p(d);function E(e,c=100){const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",e);const t=n.getTotalLength(),r=[];for(let i=0;i<c;i++){const h=i/(c-1)*t,{x:a,y:f}=n.getPointAtLength(h);r.push([a,f])}return r}function L(e,c,n,t,r){const i=t*t,h=r*r;let a,f=Number.MAX_VALUE;for(let o=0;o<e.length;o++){const[v,w]=e[o],l=(v-c)**2+(w-n)**2;if(l<i)return o;l>h||l<f&&(f=l,a=o)}return a}function R({path:e,width:c,height:n,numPoints:t,position:r,onChange:i,children:h,...a}){const f=u.default.useRef(null),o=u.default.useRef(!1),v=u.default.useMemo(()=>E(e,t),[e,t]),w=Math.max(c,n)*.08,l=Math.max(0,Math.min(t-1,Math.round(r*t))),[y,C]=v[l],g=u.default.useCallback(s=>{const x=f.current;if(!x)return;const M=x.getBoundingClientRect(),T=s.clientX-M.left,I=s.clientY-M.top,b=L(v,T,I,5,w);if(b!==void 0){const A=b/(t-1);i(A)}},[i,v,t,w]),k=u.default.useCallback(()=>{o.current=!0},[]),m=u.default.useCallback(s=>{o.current&&g(s)},[g]);return u.default.useEffect(()=>{if(!window)return;const s=()=>o.current=!1;return window.addEventListener("mouseup",s),window.addEventListener("touchend",s),()=>{window.removeEventListener("mouseup",s),window.removeEventListener("touchend",s)}}),u.default.createElement("svg",{ref:f,viewBox:`0 0 ${c} ${n}`,width:c,height:n,...a,onMouseDown:k,onMouseMove:m,onClick:m},h({path:e,handleX:y,handleY:C,position:r}))}return R});
